# 第2 章构造抽象计算机系统作业

1. 姓名： 王骏
2. 学号： 22020007104

 

> 问题①：以下哪项调整将允许存储大于当前1GB限制的文件?并说明原因。
>
> A. 仅将inode中的文件大小字段从32位增加到64位。 
>
> **B. 仅将每个块的字节数从512增加到2048字节。** 
>
> C. 重新格式化磁盘，以增加inode表中分配的inode数量。 
>
> D. 用一个额外的三级间接块号替换每个inode中的一个直接块号。
>

`选B`

现有系统的最大文件大小1GB，是由inode中直接、间接、二级和三级间接块指针的数量决定的，而不是由文件大小字段的位数决定

1. **选项A**仅增大文件大小字段位数不会改变地址映射能力，因而无效；

2. **选项B**将每个块的字节数从512增加到2048字节。这样，每个块存储的数据量增加4倍，相应地整个地址体系能覆盖的数据总量也大大增大，从而支持存储大于1GB的文件。

3. **选项C**增加inode数量与单个文件的地址能力无关；

4. **选项D**虽然通过用额外的三级间接块替换一个直接块，可以增加可寻址块的总数，但这牺牲了对小文件的效率，不如直接改变块大小。

   

> 问题②：以下哪项调整（不包括上一个问题中的任何修改），将允许存储大于当前约1GB限制的文件?并说明原因。
>
> A. 将块号的大小从4字节增加到5字节。 
>
> **B. 将块号的大小从4字节减少到3字节。** 
>
> C. 将块号的大小从4字节减少到2字节。
>

` 选B`

1. **选项 A**将块号大小由4字节改为5字节，每个间接块能存放的块号数由128减少到⌊512/5⌋＝102，导致文件可寻址块数减少，从而使最大文件大小降低；
2. **选项B**将块号大小改为3字节，每个间接块能存放⌊512/3⌋＝170个块号，这会增加间接、二级间接和三级间接块中所含的块号总数，从而使最大文件大小超过原来的1GB；
3. **选项C**改为2字节虽然进一步增加了块号数，但2字节所能表示的块号上限较低，会限制磁盘总体可寻址范围，不适合4GB硬盘。



> 问题① 与不支持同义词的缓存相比，同义词对缓存设计者带来了哪些问题？

1. **冗余和一致性问题**：同一对象可能以不同名称存在于缓存中，容易造成重复缓存和数据不一致。
2. **缓存失效管理困难**：当对象发生变化或失效时，需要同时更新所有同义词对应的缓存项，增加了维护的复杂性。
3. **查找冲突**：如何高效地查找并合并同一对象的不同名称条目，需要设计额外的数据结构和查找机制。



> 问题② 如果每个对象都有一个唯一ID，提出一种解决问题的方法。
>

 在缓存中用对象唯一ID作为关键字存储对象信息，同时建立一个名称到对象ID的映射表，使得无论用户输入哪个同义词，都能查找到相同的唯一ID，从而访问到相同的对象





> 那么李华说得对吗？

李华提出在每个用户会话中维护一个ROT，并在名称解析时首先查找ROT。他声称这样对用户是“透明”的，仅仅提高了解析速度，但是会有一些问题：

1. **缓存一致性问题**：如果文件系统发生变动，ROT中的条目可能变得过时或错误，从而导致解析错误或安全问题
2. **透明性不足**：一旦ROT中的数据与实际文件系统不符，用户可能会体验到难以察觉但实际存在的异常行为
3. **维护开销**：每次会话都要正确初始化和更新ROT，增加了系统复杂度